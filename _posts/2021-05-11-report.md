---
layout: page
title:  "MetroBS - Report"
subtitle: ""
date:   2021-05-11 11:12:21 +0100
categories: ["MetroBS"]
---
<h2 align="center"> Abstract </h2>
This  report  describes  the  path  our  group  followed  to  develop  a  wearable  fall  detection device based on an artificial intelligence algorithm.  We start with the description of theproblem, then move on to the preprocessing and feature extraction operations, followed bythe classifier and the results obtained.  More attention is given to the data processing steps.

<h2 align="center"> Introduction </h2>
<H3> Why do you need a fall detector? </h3>
<p>
Falls are the second leading cause of death from unintentional injuries worldwide, and eachyear an estimated 684,000 people die from them globally.  Another problem concerns rescue:in fact, it can take hours before a person, perhaps fallen in a place without someone nearby,is rescued[1].  If a person is alone, it is difficult to prevent the fall, but it is possible to acton post-trauma rescue.  With this purpose, a wearable device has been developed that candetect a fall and automatically send a message to a selected person, asking for help.<p>
  
<H3> How can a fall be detected? </h3>
<p>
You want to monitor the movement of a person, so the most suitable sensors are inertialsensors, namely accelerometer and giroscope.  A very simple approach to detect a fall isto define a threshold, which when exceeded, results in the detection of the event.  One must take into account the inter- and intra-personal variability of a fall, so a simple thresholdmay not be fit for this purpose, because a person may fall the same way on two differentoccasions, but the signals collected are different (Figure 1).<p>

<p align="center" width="100%">
    <img width="90%" src="https://github.com/freshq99/freshq99.github.io/blob/master/assets/img/ReportMetroBS/confrontointerintra.png?raw=true"> 
    <p align="center">Figure 1: Signals acquired from Accelerometer, X-axis, for two backward falls.<p align="center">
</p>
 
<H3> Development roadmap</h3>
The development process involves the acquisition of useful signals. These data come from the SensorTile.Box, a development kit distributed by STMicroelectronics. The Inertial Measurement Unit (IMU) - LSM6DOX - was used, which includes an accelerometer and a gyroscope, for a total of six degrees of freedom (three axes for each sensor).
<p align="center" width="100%">
    <img width="55%" src="https://github.com/freshq99/freshq99.github.io/blob/master/assets/img/ReportMetroBS/dataset_structure.png?raw=true"> 
    <p align="center">Figure 2: Structure of the used dataset.<p align="center">
</p>

The data was acquired via USB with the software SensiML Data Capture Lab, allowing to build the dataset.When talking about artificial intelligence, it is indeed very important to have a large and varied dataset. For the goals set, 1503 signals were collected, distributed as in Figure 2.

The next step is the extraction of features, fundamental for a good training of the classifier. Then we can proceed with the development of the neural network, the classifier that allows to detect a fall. The last step is the deployment of the model on the SensorTile.Box and use with the connected app. A schematic of the development path can be seen in Figure 3.
<p align="center" width="110%">
    <img width="75%" src="https://github.com/freshq99/freshq99.github.io/blob/master/assets/img/ReportMetroBS/roadmap.PNG?raw=true"> 
    <p align="center">Figure 3: Development Pathway.<p align="center">
</p>

<h2 align="center"> Tools and Methods </h2>
<H3> Tools </h3>
Considering  Figure  1,  we  see  that  there  are  very  sharp  peaks  in  the  signals,  which  arecertainly  important  when  analyzing  for  feature  extraction.   A  fundamental  step  is  thechoice ofsampling frequency, so as not to lose important data.  Choosing a very highone may be fine, but remember:

<ul>
<li>The device does not need to reconstruct the initial signal (so compliance with Shannon's Theorem is not essential);</li>
<li>The size in terms of bytes of the acquired signal may increase due to the increased number of samples.</li>
</ul>

The problem concerns low sampling frequencies. If a frequency of, for example, 3 Hz is used,important data, such as peaks, will certainly be lost. Please note that Sensiml Data CaptureLab was used, which allows the use of a different number of sampling frequencies, but alsothe application ST BLE Sensor, with the function of signal acquisition via Bluetooth LowEnergy.  The latter application also makes multiple sampling frequencies available, so by”cross-referencing” the available frequencies, a sampling frequency of 104 Hz was chosen.We have to make some considerations also on the measuring range of the accelerometer:is it suitable to detect a fall?  Exclude falls in which sensitive organs or body parts (e.g.temples, neck) are hit.  A human being can withstand accelerations from 4g to 6g, up to9g for a few seconds (do not consider trained persons).  The accelerometer has a measuringrange of (-4÷+4)g, therefore suitable for the purpose.  As for the gyroscope, the measuringrange is (-2000÷+2000)dps, which, in the full-scale value, corresponds to a high numberof complete revolutions, to be excluded in the case of a normal fall.  It is concluded thatthe two sensors have suitable measuring ranges.  It is then the data from these two sensorsthat are processed and fed into the classifier.  Among the downsides of inertial sensors isthe absence of a reference system, so the dataset was created by falling on a mattress, withthe microcontroller in any of the front pockets, varying the orientation as much as possible.In this way, the neural network is able to make a prediction regardless of the pocket thedevice is in and its orientation.

<H3> Why a neural network? </h3>
<p align="center" width="110%">
    <img width="30%" src="https://github.com/freshq99/freshq99.github.io/blob/master/assets/img/ReportMetroBS/boxplot_std.png"> 
    <p align="center">Figure 4: Boxplot of standard deviationsin a group of 22 backward falls, relativeto the x-axis of the accelerometer.<p align="center">
</p>
Consider again the use of a threshold, placed forexample on the standard deviation of the datafrom the x-axis accelerometer. As seen in Figure 4, the standard deviationvaries even among falls of the same type, so itis difficult to rely solely on a threshold to deter-mine  a  fall.   The  considerations  just  made  ledto discard the use of a threshold and deviate tothe  use  of  a  neural  network.   Artificial  intelli-gence was chosen because it allows to detect afall thanks to the analysis of multiple features,not just one property of the signal, but also be-cause  it  allows  to  find  non-linear  relationshipsbetween inputs, difficult to highlight with otheralgorithms.



<H3> Preprocessing </h3>
Before  extracting  features,  it  is  necessary  to  process  the  data  in  order  to  optimize  theextraction  of  important  features  as  much  as  possible.   First,  we  apply  awindowingtoeach capitred signal of the dataset.  The main goal of this operation is to increase the sizeof the dataset (Figure 5),  so that each window is treated as if it were a separate signal.
<p align="center" width="110%">
    <img width="75%" src="https://github.com/freshq99/freshq99.github.io/blob/master/assets/img/ReportMetroBS/roadmap.PNG?raw=true"> 
    <p align="center">Figure 3: Development Pathway.<p align="center">
</p>
